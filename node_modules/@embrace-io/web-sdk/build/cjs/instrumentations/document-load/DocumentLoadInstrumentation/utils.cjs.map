{"version":3,"file":"utils.cjs","sources":["../../../../../src/instrumentations/document-load/DocumentLoadInstrumentation/utils.ts"],"sourcesContent":["/*\n * Adapted from OpenTelemetry document-load instrumentation\n * https://github.com/open-telemetry/opentelemetry-js-contrib/tree/cc7eff47e2e7bad7678241b766753d5bd6dbc85f/packages/instrumentation-document-load\n */\n\nimport type { Span } from '@opentelemetry/api';\nimport type { PerformanceEntries } from '@opentelemetry/sdk-trace-web';\nimport { hasKey, PerformanceTimingNames } from '@opentelemetry/sdk-trace-web';\nimport { EventNames } from './enums/EventNames.js';\n\nexport const getPerformanceNavigationEntries = (): PerformanceEntries => {\n  const entries: PerformanceEntries = {};\n  const performanceNavigationTiming =\n    window.performance.getEntriesByType('navigation')[0];\n\n  const keys = Object.values(PerformanceTimingNames);\n  keys.forEach((key: PerformanceTimingNames) => {\n    if (hasKey(performanceNavigationTiming, key)) {\n      const value = performanceNavigationTiming[key];\n      if (typeof value === 'number') {\n        entries[key] = value;\n      }\n    }\n  });\n\n  return entries;\n};\n\nconst performancePaintNames = {\n  'first-paint': EventNames.FIRST_PAINT,\n  'first-contentful-paint': EventNames.FIRST_CONTENTFUL_PAINT,\n};\n\nexport const addSpanPerformancePaintEvents = (span: Span) => {\n  const performancePaintTiming = window.performance.getEntriesByType('paint');\n  performancePaintTiming.forEach(({ name, startTime }) => {\n    if (hasKey(performancePaintNames, name)) {\n      span.addEvent(performancePaintNames[name], startTime);\n    }\n  });\n};\n"],"names":["getPerformanceNavigationEntries","entries","performanceNavigationTiming","window","performance","getEntriesByType","keys","Object","values","PerformanceTimingNames","forEach","key","hasKey","value","performancePaintNames","EventNames","FIRST_PAINT","FIRST_CONTENTFUL_PAINT","addSpanPerformancePaintEvents","span","performancePaintTiming","name","startTime","addEvent"],"mappings":";;;;;MAUaA,+BAAAA,GAAkC,IAAA;AAC7C,IAAA,MAAMC,UAA8B,EAAC;IACrC,MAAMC,2BAAAA,GACJC,OAAOC,WAAW,CAACC,gBAAgB,CAAC,YAAA,CAAa,CAAC,CAAA,CAAE;IAEtD,MAAMC,IAAAA,GAAOC,MAAAA,CAAOC,MAAM,CAACC,kCAAAA,CAAAA;IAC3BH,IAAAA,CAAKI,OAAO,CAAC,CAACC,GAAAA,GAAAA;QACZ,IAAIC,kBAAAA,CAAOV,6BAA6BS,GAAAA,CAAAA,EAAM;YAC5C,MAAME,KAAAA,GAAQX,2BAA2B,CAACS,GAAAA,CAAI;YAC9C,IAAI,OAAOE,UAAU,QAAA,EAAU;gBAC7BZ,OAAO,CAACU,IAAI,GAAGE,KAAAA;AACjB,YAAA;AACF,QAAA;AACF,IAAA,CAAA,CAAA;IAEA,OAAOZ,OAAAA;AACT;AAEA,MAAMa,qBAAAA,GAAwB;AAC5B,IAAA,aAAA,EAAeC,sBAAWC,WAAW;AACrC,IAAA,wBAAA,EAA0BD,sBAAWE;AACvC,CAAA;AAEO,MAAMC,gCAAgC,CAACC,IAAAA,GAAAA;AAC5C,IAAA,MAAMC,sBAAAA,GAAyBjB,MAAAA,CAAOC,WAAW,CAACC,gBAAgB,CAAC,OAAA,CAAA;AACnEe,IAAAA,sBAAAA,CAAuBV,OAAO,CAAC,CAAC,EAAEW,IAAI,EAAEC,SAAS,EAAE,GAAA;QACjD,IAAIV,kBAAAA,CAAOE,uBAAuBO,IAAAA,CAAAA,EAAO;AACvCF,YAAAA,IAAAA,CAAKI,QAAQ,CAACT,qBAAqB,CAACO,KAAK,EAAEC,SAAAA,CAAAA;AAC7C,QAAA;AACF,IAAA,CAAA,CAAA;AACF;;;;;"}