'use strict';

var api = require('@opentelemetry/api');
var EmbraceExtendedSpan = require('./EmbraceExtendedSpan.cjs');
var attributes = require('../../constants/attributes.cjs');

class EmbraceTraceManager {
    constructor({ tracerProvider: globalTraceProviderOverride } = {}){
        this.setSpan = api.trace.setSpan;
        const tracerProvider = globalTraceProviderOverride ?? api.trace;
        this._tracer = tracerProvider.getTracer('embrace-web-sdk-traces');
    }
    startSpan(name, options = {}, ctx) {
        options.attributes = options.attributes ? options.attributes : {};
        options.attributes[attributes.KEY_EMB_TYPE] = attributes.EMB_TYPES.Perf;
        const activeContext = options.parentSpan ? api.trace.setSpan(api.context.active(), options.parentSpan) : ctx;
        return new EmbraceExtendedSpan.EmbraceExtendedSpan(this._tracer.startSpan(name, options, activeContext));
    }
    getSpan(context) {
        const span = api.trace.getSpan(context);
        if (span) {
            return new EmbraceExtendedSpan.EmbraceExtendedSpan(span);
        }
        return undefined;
    }
}

exports.EmbraceTraceManager = EmbraceTraceManager;
//# sourceMappingURL=EmbraceTraceManager.cjs.map
