{"version":3,"file":"TraceAPI.js","sources":["../../../../../src/api-traces/api/TraceAPI/TraceAPI.ts"],"sourcesContent":["import { ProxyTraceManager } from '../../manager/index.js';\nimport type { TraceManager } from '../../manager/index.js';\nimport type {\n  ExtendedSpan,\n  ExtendedSpanOptions,\n  TraceAPIArgs,\n} from './types.js';\nimport type { Context } from '@opentelemetry/api';\n\nexport class TraceAPI implements TraceManager {\n  private static _instance?: TraceAPI;\n  private readonly _proxyTraceManager;\n\n  private constructor({ proxyTraceManager }: TraceAPIArgs) {\n    this._proxyTraceManager = proxyTraceManager;\n  }\n\n  public static getInstance(): TraceAPI {\n    if (!TraceAPI._instance) {\n      TraceAPI._instance = new TraceAPI({\n        proxyTraceManager: new ProxyTraceManager(),\n      });\n    }\n\n    return TraceAPI._instance;\n  }\n\n  public getTraceManager: () => TraceManager = () => {\n    return this._proxyTraceManager;\n  };\n\n  public setGlobalTraceManager(traceManager: TraceManager): void {\n    this._proxyTraceManager.setDelegate(traceManager);\n  }\n\n  public startSpan(\n    name: string,\n    options?: ExtendedSpanOptions,\n    context?: Context\n  ): ExtendedSpan {\n    return this.getTraceManager().startSpan(name, options, context);\n  }\n\n  public setSpan(context: Context, span: ExtendedSpan): Context {\n    return this.getTraceManager().setSpan(context, span);\n  }\n\n  public getSpan(context: Context): ExtendedSpan | undefined {\n    return this.getTraceManager().getSpan(context);\n  }\n}\n"],"names":["TraceAPI","proxyTraceManager","getTraceManager","_proxyTraceManager","getInstance","_instance","ProxyTraceManager","setGlobalTraceManager","traceManager","setDelegate","startSpan","name","options","context","setSpan","span","getSpan"],"mappings":";;AASO,MAAMA,QAAAA,CAAAA;IAIX,WAAA,CAAoB,EAAEC,iBAAiB,EAAgB,CAAE;aAclDC,eAAAA,GAAsC,IAAA;YAC3C,OAAO,IAAI,CAACC,kBAAkB;AAChC,QAAA,CAAA;QAfE,IAAI,CAACA,kBAAkB,GAAGF,iBAAAA;AAC5B,IAAA;AAEA,IAAA,OAAcG,WAAAA,GAAwB;QACpC,IAAI,CAACJ,QAAAA,CAASK,SAAS,EAAE;YACvBL,QAAAA,CAASK,SAAS,GAAG,IAAIL,QAAAA,CAAS;AAChCC,gBAAAA,iBAAAA,EAAmB,IAAIK,iBAAAA;AACzB,aAAA,CAAA;AACF,QAAA;AAEA,QAAA,OAAON,SAASK,SAAS;AAC3B,IAAA;AAMOE,IAAAA,qBAAAA,CAAsBC,YAA0B,EAAQ;AAC7D,QAAA,IAAI,CAACL,kBAAkB,CAACM,WAAW,CAACD,YAAAA,CAAAA;AACtC,IAAA;AAEOE,IAAAA,SAAAA,CACLC,IAAY,EACZC,OAA6B,EAC7BC,OAAiB,EACH;AACd,QAAA,OAAO,IAAI,CAACX,eAAe,GAAGQ,SAAS,CAACC,MAAMC,OAAAA,EAASC,OAAAA,CAAAA;AACzD,IAAA;IAEOC,OAAAA,CAAQD,OAAgB,EAAEE,IAAkB,EAAW;AAC5D,QAAA,OAAO,IAAI,CAACb,eAAe,EAAA,CAAGY,OAAO,CAACD,OAAAA,EAASE,IAAAA,CAAAA;AACjD,IAAA;AAEOC,IAAAA,OAAAA,CAAQH,OAAgB,EAA4B;AACzD,QAAA,OAAO,IAAI,CAACX,eAAe,EAAA,CAAGc,OAAO,CAACH,OAAAA,CAAAA;AACxC,IAAA;AACF;;;;"}