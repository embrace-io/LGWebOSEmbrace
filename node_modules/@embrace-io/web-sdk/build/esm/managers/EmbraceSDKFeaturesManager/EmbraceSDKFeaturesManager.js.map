{"version":3,"file":"EmbraceSDKFeaturesManager.js","sources":["../../../../src/managers/EmbraceSDKFeaturesManager/EmbraceSDKFeaturesManager.ts"],"sourcesContent":["import type { SDKFeaturesManager, SDKFeaturesManagerArgs } from './types.js';\nimport type { DynamicConfigManager } from '../../sdk/index.js';\nimport { isDeviceIdEnabled } from '../../utils/index.js';\n\nexport class EmbraceSDKFeaturesManager implements SDKFeaturesManager {\n  private readonly _dynamicConfigManager: DynamicConfigManager;\n  private readonly _deviceId: string;\n  private readonly _blockNetworkSpanForwarding: boolean;\n\n  public constructor({\n    dynamicConfigManager,\n    deviceId,\n    blockNetworkSpanForwarding,\n  }: SDKFeaturesManagerArgs) {\n    this._dynamicConfigManager = dynamicConfigManager;\n    this._deviceId = deviceId;\n    this._blockNetworkSpanForwarding = blockNetworkSpanForwarding;\n  }\n\n  public isSDKEnabled(): boolean {\n    const config = this._dynamicConfigManager.getConfig();\n\n    return isDeviceIdEnabled(this._deviceId, config.samplingPct);\n  }\n\n  public isNetworkSpanForwardingEnabled(): boolean {\n    if (this._blockNetworkSpanForwarding) {\n      return false;\n    }\n\n    const config = this._dynamicConfigManager.getConfig();\n\n    return isDeviceIdEnabled(\n      this._deviceId,\n      config.networkSpansForwardingThreshold\n    );\n  }\n}\n"],"names":["EmbraceSDKFeaturesManager","dynamicConfigManager","deviceId","blockNetworkSpanForwarding","_dynamicConfigManager","_deviceId","_blockNetworkSpanForwarding","isSDKEnabled","config","getConfig","isDeviceIdEnabled","samplingPct","isNetworkSpanForwardingEnabled","networkSpansForwardingThreshold"],"mappings":";;AAIO,MAAMA,yBAAAA,CAAAA;AAKX,IAAA,WAAA,CAAmB,EACjBC,oBAAoB,EACpBC,QAAQ,EACRC,0BAA0B,EACH,CAAE;QACzB,IAAI,CAACC,qBAAqB,GAAGH,oBAAAA;QAC7B,IAAI,CAACI,SAAS,GAAGH,QAAAA;QACjB,IAAI,CAACI,2BAA2B,GAAGH,0BAAAA;AACrC,IAAA;IAEOI,YAAAA,GAAwB;AAC7B,QAAA,MAAMC,MAAAA,GAAS,IAAI,CAACJ,qBAAqB,CAACK,SAAS,EAAA;AAEnD,QAAA,OAAOC,kBAAkB,IAAI,CAACL,SAAS,EAAEG,OAAOG,WAAW,CAAA;AAC7D,IAAA;IAEOC,8BAAAA,GAA0C;QAC/C,IAAI,IAAI,CAACN,2BAA2B,EAAE;YACpC,OAAO,KAAA;AACT,QAAA;AAEA,QAAA,MAAME,MAAAA,GAAS,IAAI,CAACJ,qBAAqB,CAACK,SAAS,EAAA;AAEnD,QAAA,OAAOC,kBACL,IAAI,CAACL,SAAS,EACdG,OAAOK,+BAA+B,CAAA;AAE1C,IAAA;AACF;;;;"}