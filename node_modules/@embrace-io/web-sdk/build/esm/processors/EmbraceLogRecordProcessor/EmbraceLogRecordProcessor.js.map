{"version":3,"file":"EmbraceLogRecordProcessor.js","sources":["../../../../src/processors/EmbraceLogRecordProcessor/EmbraceLogRecordProcessor.ts"],"sourcesContent":["import type { SdkLogRecord, LogRecordProcessor } from '@opentelemetry/sdk-logs';\nimport { EMB_TYPES, KEY_EMB_TYPE } from '../../constants/index.js';\nimport type { EmbraceLogRecordProcessorArgs } from './types.js';\nimport type { URLDocument } from '../../common/index.js';\nimport { ATTR_URL_FULL } from '@opentelemetry/semantic-conventions';\n\nexport class EmbraceLogRecordProcessor implements LogRecordProcessor {\n  private readonly _urlDocument: URLDocument;\n\n  public constructor({\n    urlDocument = window.document,\n  }: EmbraceLogRecordProcessorArgs = {}) {\n    this._urlDocument = urlDocument;\n  }\n\n  // no-op\n  public forceFlush(): Promise<void> {\n    return Promise.resolve(undefined);\n  }\n\n  public onEmit(logRecord: SdkLogRecord) {\n    if (!logRecord.attributes[KEY_EMB_TYPE]) {\n      logRecord.setAttribute(KEY_EMB_TYPE, EMB_TYPES.SystemLog);\n    }\n\n    logRecord.setAttribute(ATTR_URL_FULL, this._urlDocument.URL);\n  }\n\n  // no-op\n  public shutdown(): Promise<void> {\n    return Promise.resolve(undefined);\n  }\n}\n"],"names":["EmbraceLogRecordProcessor","urlDocument","window","document","_urlDocument","forceFlush","Promise","resolve","undefined","onEmit","logRecord","attributes","KEY_EMB_TYPE","setAttribute","EMB_TYPES","SystemLog","ATTR_URL_FULL","URL","shutdown"],"mappings":";;;AAMO,MAAMA,yBAAAA,CAAAA;IAGX,WAAA,CAAmB,EACjBC,cAAcC,MAAAA,CAAOC,QAAQ,EACC,GAAG,EAAE,CAAE;QACrC,IAAI,CAACC,YAAY,GAAGH,WAAAA;AACtB,IAAA;;IAGOI,UAAAA,GAA4B;QACjC,OAAOC,OAAAA,CAAQC,OAAO,CAACC,SAAAA,CAAAA;AACzB,IAAA;AAEOC,IAAAA,MAAAA,CAAOC,SAAuB,EAAE;AACrC,QAAA,IAAI,CAACA,SAAAA,CAAUC,UAAU,CAACC,aAAa,EAAE;AACvCF,YAAAA,SAAAA,CAAUG,YAAY,CAACD,YAAAA,EAAcE,SAAAA,CAAUC,SAAS,CAAA;AAC1D,QAAA;AAEAL,QAAAA,SAAAA,CAAUG,YAAY,CAACG,aAAAA,EAAe,IAAI,CAACZ,YAAY,CAACa,GAAG,CAAA;AAC7D,IAAA;;IAGOC,QAAAA,GAA0B;QAC/B,OAAOZ,OAAAA,CAAQC,OAAO,CAACC,SAAAA,CAAAA;AACzB,IAAA;AACF;;;;"}